@page "/Statistics/Catches"
@inject Microsoft.Extensions.Localization.IStringLocalizer<App> Localize
@inject IJSRuntime JSRuntime
@using BioMap
@using BioMap.Shared
@using ChartJs.Blazor.Common.Enums
@using ChartJs.Blazor.Common.Axes
@using ChartJs.Blazor.Common.Axes.Ticks
@using ChartJs.Blazor.Common
@using ChartJs.Blazor.Common.Handlers
@using ChartJs.Blazor.Common.Time
@using ChartJs.Blazor.LineChart
@using ChartJs.Blazor.BarChart
@using ChartJs.Blazor.BarChart.Axes

<FilterSettings FilteringTarget="@Filters.FilteringTargetEnum.Individuals" />

<h1>@Localize["Catches"]</h1>

<Tabs SelectedTab="@selectedTab" SelectedTabChanged="@OnSelectedTabChanged" Pills="true">
  <Items>
    <Tab Name="OverTime">@Localize["Catch numbers over time"]</Tab>
    <Tab Name="PerMonth">@Localize["Catch numbers per month"]</Tab>
    <Tab Name="HeadBodyLength">@Localize["Head-body-length of all catches"]</Tab>
    <Tab Name="GenderRatio">@Localize["Gender"]</Tab>
    <Tab Name="MigrationDistances">@Localize["Migration distances"]</Tab>
  </Items>
  <Content>
    <TabPanel Name="OverTime">
      <Row>
        <Column>
          <Chart @ref="_chartJsOverTime" Config="@_configOverTime" Width="600" Height="300" />
        </Column>
      </Row>
      <Row>
        <Column>
          <TableFromChart @ref="_tableFromChartOverTime" RowLabel="@Localize["Month"]" _config="@_configOverTime"/>
        </Column>
      </Row>
    </TabPanel>
    <TabPanel Name="PerMonth">
      <Row>
        <Column>
          <Chart @ref="_chartJsPerMonth" Config="@_configPerMonth" Width="600" Height="300" />
        </Column>
      </Row>
      <Row>
        <Column>
          <TableFromChart @ref="_tableFromChartPerMonth" RowLabel="@Localize["Month"]" _config="@_configPerMonth" />
        </Column>
      </Row>
    </TabPanel>
    <TabPanel Name="HeadBodyLength">
      <Row>
        <Column>
          <Chart @ref="_chartJsHeadBodyLength" Config="@_configHeadBodyLength" Width="600" Height="300" />
        </Column>
      </Row>
      <Row>
        <Column>
          <TableFromChart @ref="_tableFromChartHeadBodyLength" RowLabel="@(Localize["Length"]+" / mm")" _config="@_configHeadBodyLength" />
        </Column>
      </Row>
    </TabPanel>
    <TabPanel Name="GenderRatio">
      <Row>
        <Column>
          <Chart @ref="_chartJsGenderRatio" Config="@_configGenderRatio" Width="600" Height="300" />
        </Column>
      </Row>
      <Row>
        <Column>
          <TableFromChart @ref="_tableFromChartGenderRatio" RowLabel="@(Localize["Month"])" _config="@_configGenderRatio" />
        </Column>
      </Row>
    </TabPanel>
    <TabPanel Name="MigrationDistances">
      <Row>
        <Column>
          <Chart @ref="_chartJsMigrationDistances" Config="@_configMigrationDistances" Width="600" Height="300" />
        </Column>
      </Row>
      <Row>
        <Column>
          <TableFromChart @ref="_tableFromChartMigrationDistances" RowLabel="@(Localize["Distance"]+" / m")" _config="@_configMigrationDistances" />
        </Column>
      </Row>
    </TabPanel>
  </Content>
</Tabs>
