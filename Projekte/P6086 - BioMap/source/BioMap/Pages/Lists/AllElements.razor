@page "/lists/all_elements"
@inject Microsoft.Extensions.Localization.IStringLocalizer<App> Localize
@inject DataService DS
@inject IJSRuntime JSRuntime
@using BioMap

<h1>@Localize["All Elements"]</h1>

<p>Anzahl Elemente: @Elements.Length</p>

<PhotoPopup @ref="PhotoPopup1" Title="XXX" />

@*<img src="api/photos/@SelectedElementName" style="max-width:100%;max-height:100%;margin-top:6px;" />*@

<table class="table table-striped">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Cat.</th>
      <th scope="col">Details</th>
      <th scope="col">Date</th>
      <th scope="col">Name</th>
      <th scope="col">User</th>
    </tr>
  </thead>
  <tbody>
    @foreach (var el in Elements) {
      <tr>
        <th scope="row">@(i++)</th>
        <td>@el.ElementProp.MarkerInfo.category</td>
        <td>@el.GetDetails()</td>
        <td>@el.ElementProp.CreationTime</td>
        <td><a @onclick="()=>OnSelectClick(el.ElementName)">@el.ElementName</a></td>
        <td>@el.ElementProp.UploadInfo.UserId</td>
      </tr>
    }
  </tbody>
</table>

@code {
  private int i = 0;
  private Element[] Elements = DataService.Instance.GetElements();
  private PhotoPopup PhotoPopup1;
  private string SelectedElementName = "";
  private async void OnSelectClick(string sElementName) {
    this.SelectedElementName=sElementName;
    this.PhotoPopup1.Show(sElementName);
  }
}
